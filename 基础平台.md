*本文档适用于CentOS 7。*
## 安装Docker
```sh
curl -fsSL https://get.docker.com | bash -s docker
sudo usermod -aG docker $(whoami)

sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
      "https://registry.cn-hangzhou.aliyuncs.com"
  ],
  "insecure-registries" : [
    "docker-registry.corilead.com"
  ]
}
EOF
sudo systemctl daemon-reload
sudo systemctl enable docker
sudo systemctl restart docker
docker version
```

## 安装Docker Compose
```sh
sudo curl -L "https://github.com/docker/compose/releases/download/1.28.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
docker-compose --version
```

## 登录Docker镜像服务器
```sh
docker login docker-registry.corilead.com
```

## 启动平台服务
```sh
git clone --depth 1 http://git.corilead.com/cplm/cplm-cloud-deploy.git
chmod -R 755 cplm-cloud-deploy
cd cplm-cloud-deploy/docker
./startup-dev.sh
```

## 加载演示数据
TODO

## 使用主机IP
* 默认情况下，只能在Docker主机中通过`localhost`访问基础平台应用
* 通过`ifconfig`命令查询Docker主机的IP地址，如192.168.0.77
* 访问Nacos控制台[`http://localhost:8848/nacos`](http://localhost:8848/nacos)，修改配置`cpdm-gateway.properties`
```
spring.security.oauth2.client.provider.uaa.authorization-uri=http://192.168.0.77/uaa/oauth/authorize
```

## 应用地址
* 系统控制台 [`http://localhost/plm/app/system-console`](http://localhost/plm/app/system-console)
* 租户控制台 [`http://localhost/plm/app/tenant-console`](http://localhost/plm/app/tenant-console)

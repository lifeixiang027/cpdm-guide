## 概述
## 定义注解类
新建注解类
```java
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface ScheduledTask {
  /** 任务名称 */
  String name();

  String group();

  /** 任务描述 */
  String description();

  /** 执行周期 */
  String scheduleRate();

  /** 定时表达式 */
  String cron();

  /** 自定义参数 */
  String params();

  /** 失败重试次数 */
  int failureNum();

  /** 失败重试间隔 */
  int failureInterval();
}
```
新建后置处理器（BeanPostProcessor）
```java
import java.util.Objects;
import org.springframework.aop.framework.AopProxyUtils;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.core.annotation.AnnotationUtils;

public class ScheduledTaskBeanPostProcessor implements BeanPostProcessor {

  @Override
  public Object postProcessAfterInitialization(Object bean, String beanName) {
    Class<?> targetClass = AopProxyUtils.ultimateTargetClass(bean);
    //    获取自定义注解
    ScheduledTask annotation = AnnotationUtils.getAnnotation(targetClass, ScheduledTask.class);
    //    如果自定义注解不为空，则表示此类被注解
    if (Objects.nonNull(annotation)) {
      //     从注解中获取属性，进行后续处理

    }
    return bean;
  }
}
```
新建导入类（ImportSelector）
```java
import org.springframework.context.annotation.ImportSelector;
import org.springframework.core.type.AnnotationMetadata;
import org.springframework.lang.NonNull;

 public class ScheduledTaskImportSelector implements ImportSelector {

  @NonNull
  @Override
  public String[] selectImports(AnnotationMetadata annotationMetadata) {
    return new String[] {ScheduledTaskBeanPostProcessor.class.getName()};
  }
 }
```
新建Enable*注解
```java
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import org.springframework.context.annotation.Import;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Import(ScheduledTaskImportSelector.class)
@Documented
public @interface EnableScheduledTask {}
```

